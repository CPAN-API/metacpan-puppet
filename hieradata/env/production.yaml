---

classes:
    - metacpan::role::production
    - metacpan::system::mongodb

exim::config_type: 'satellite'
exim::smarthost: 'smtp.mailgun.org'
exim::relayhost: '*.mailgun.org'

metacpan::carton_args: '--deployment'

metacpan::elasticsearch::memory: '10g'

# Let's have rrr on all machines for now
# we can setup cpan.mc.org with a failover!
metacpan::rrrclient::enable: true

metacpan::system::ramdisks:
    '/mnt/scratch_disk':
        size: '1G'
        valid_mins: '45'

metacpan::crons::general:
    metacpan_clean_up_source:
      ensure : present
    run_puppet:
      ensure : present

metacpan::web::starman:
  api-v0-shim:
    git_source: 'https://github.com/metacpan/metacpan-api-v0-shim.git'
    git_revision: 'master'
    vhost_bare: true
    vhost_aliases:
      - 'api-v0-shim.metacpan.org'
    starman_port: 5003
    git_enable: true
    starman_workers: 2
  metacpan-web:
    git_enable: true
    starman_workers: 10
  metacpan-api:
    git_enable: true
    starman_workers: 14
  github-meets-cpan:
    git_enable: true
    starman_workers: 1

metacpan::web::static:
  metacpan-explorer:
    git_enable: true

metacpan::users:
    leo:
        admin    : true
        fullname : "Leo Lapworth <leo@cuckoo.org>"
        no_passwd_sudo : true
    olaf:
        admin    : true
        fullname : "Olaf Alders <olaf.alders@gmail.com>"
        no_passwd_sudo : true
    rwstauner:
        admin    : true
        fullname : 'Randy Stauner <rwstauner@cpan.org>'
        shell    : /bin/zsh
    sawyer:
        ensure   : absent
        admin    : true
        fullname : 'Sawyer <xsawyerx@cpan.org>'
        shell    : /bin/zsh
    trs:
        admin    : true
        fullname : "Thomas Sibley <tsibley@cpan.org>"
    matthewt:
        admin    : true
        fullname : "Matt S Trout <perl-stuff@trout.me.uk>"
    haarg:
        admin    : true
        fullname : "Graham Knop <haarg@haarg.org>"
    mhorsfall:
        ensure   : absent
        admin    : true
        fullname : "Matthew Horsfall (alh) <wolfsage@gmail.com>"
    ben:
        ensure   : absent
        admin    : true
        fullname : "Ben Hundley <ben@qbox.io>"
    ether:
        admin    : true
        fullname : "Karen Etheridge <ether@cpan.org"
    mickey:
        admin    : true
        fullname : "Mickey Nasriachi <mickey@cpan.org>"
    # David Cantrell needs access for cpxxxan and cpan deps (rsync)
    davidc:
        fullname : "David Cantrell <david@cantrell.org.uk>"
    brad:
        admin    : true
        fullname : "Brad Lhotsky <brad.lhotsky@gmail.com>"
    jberger:
        admin    : true
        fullname : "Joel Berger <joel.a.berger@gmail.com>"

